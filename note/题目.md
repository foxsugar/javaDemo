## 题目 


### 可重入锁的实现原理  
重入锁实现可重入性原理或机制是：每一个锁关联一个线程持有者和计数器，当计数器为 0 时表示该锁没有被任何线程持有，那么任何线程都可能获得该锁而调用相应的方法；当某一线程请求成功后，JVM会记下锁的持有线程，并且将计数器置为 1；此时其它线程请求该锁，则必须等待；而该持有锁的线程如果再次请求这个锁，就可以再次拿到这个锁，同时计数器会递增；当线程退出同步代码块时，计数器会递减，如果计数器为 0，则释放该锁。

### Java中存在的4种引用类型 
1. 强引用  
是指创建一个对象并把这个对象赋给一个引用变量 类似 string s="hello"，只要引用存在，GC永远不会回收

2. 软引用  
非必需引用，内存不足时回收。软引用主要用于用户实现类似缓存的功能，在没有被回收前可以直接通过软引用取值，无需从繁忙的真实来源查询数据，提升速度；当内存不足时，自动删除这部分缓存数据，从真实的来源查询这些数据。

3. 弱引用  
描述非必需对象。被弱引用关联的对象只能生存到下一次垃圾回收之前，垃圾收集器工作之后，无论当前内存是否足够，都会回收掉只被弱引用关联的对象。弱引用主要用于监控对象是否已经被标记为即将回收的垃圾，可以通过弱引用的isEnQueues方法返回对象是否被垃圾回收器标记。

4. 虚引用  
虚引用是每次垃圾回收的时候都会被回收,唯一作用当对象被回收时，可以收到通知。

### GC判定的两种方式 
对象是否死亡的2中判定方法：引用计数和可达性分析（又称引用链）

1. 引用计数  
对象再被创建时，对象头里会存储引用计数器，对象被引用，计数器+1；引用失效，计数器 －1；GC时会回收计数器为0的对象。但是JVM没有用这种方式，因为无法判定相互循环引用（A引用B,B引用A）的情况，无法解决对象互相循环引用。

 

2. 引用链  
程序把所有的引用看作图（类似树结构的图），选定一个对象作为GC Root根节点，从该节点开始寻找对应的引用节点并标记，找到这个节点之后，继续寻找这个节点的引用节点，当所有的引用节点寻找完毕之后，剩余的节点认为是不可达的无用节点，会被回收。
可以作为GC Root根节点的对象有： 

        a.虚拟机栈中的引用对象（本地变量表）
        b.方法区类静态属性的引用对象
        c.方法区常量引用的对象
        d.本地方法栈中的引用对象
 
### JVM 的永久代中会发生垃圾回收么？ 
垃圾回收不会发生在永久代，如果永久代满了或者是超过了临界值，会触发完全垃圾回收(Full GC)。如果你仔细查看垃圾收集器的输出信息，就会发现永久代也是被回收的。这就是为什么正确的永久代大小对避免Full GC是非常重要的原因。请参考下Java8：从永久代到元数据区 
